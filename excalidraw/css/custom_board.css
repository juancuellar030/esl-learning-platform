@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Pacifico&family=Playfair+Display:wght@400;700&family=Bebas+Neue&family=Poppins:wght@400;600&family=Chewy&family=Happy+Monkey&display=swap');

/* Override Excalidraw Variables to match Platform Aesthetic */
:root {
    /* Platform Colors */
    --indigo-velvet: #3d348b;
    --medium-slate-blue: #7678ed;
    --amber-flame: #f7b801;
    --tiger-orange: #f18701;
    --cayenne-red: #f35b04;

    /* Override Excalidraw Primary Colors */
    --color-primary: var(--indigo-velvet);
    --color-primary-darker: #2a246a;
    --color-primary-darkest: #1a1645;
    --color-primary-light: #e0dfff;
}

/* ===== THEMES ===== */
body.theme-nature {
    --indigo-velvet: #2d6a4f;
    --medium-slate-blue: #52b788;
    --amber-flame: #95d5b2;
    --tiger-orange: #74c69d;
    --cayenne-red: #1b4332;
}

body.theme-sunset {
    --indigo-velvet: #6d597a;
    --medium-slate-blue: #b56576;
    --amber-flame: #eaac8b;
    --tiger-orange: #e56b6f;
    --cayenne-red: #355070;
}

body.theme-ocean {
    --indigo-velvet: #003049;
    --medium-slate-blue: #0077b6;
    --amber-flame: #90e0ef;
    --tiger-orange: #48cae4;
    --cayenne-red: #03045e;
}

body.theme-amber {
    --indigo-velvet: #582f0e;
    --medium-slate-blue: #f9c74f;
    --amber-flame: #ffef96;
    --tiger-orange: #f3722c;
    --cayenne-red: #a4161a;
}

/* Hide Unwanted Elements */

/* Social Links */
a[href*="twitter.com"],
a[href*="x.com"],
a[href*="discord.gg"],
a[href*="github.com"],
a[href*="youtube.com"] {
    display: none !important;
}

/* Specific Excalidraw+ Promotions and Buttons */
.plus-banner,
.encrypted-icon,
.collab-button,
.layer-ui__wrapper__top-right .excalidraw-button {
    display: none !important;
}

/* Hide the Library Sidebar Button */
.sidebar-trigger {
    display: none !important;
}

/* Hide "Make comments with Excalidraw+" promo in sidebar */
.app-sidebar-promo-container {
    display: none !important;
}

/* Hide "Sign up" or "Login" if present in menu */
.dropdown-menu-item-base[href*="plus.excalidraw.com"],
/* Hide "Sign up" or "Login" if present in menu */
.dropdown-menu-item-base[href*="plus.excalidraw.com"],
.dropdown-menu-item-base[href*="app.excalidraw.com"],
.dropdown-menu-item-base[href*="accounts.google.com"],
a[href*="plus.excalidraw.com"],
a[href*="excalidraw.com/signup"],
a[href*="excalidraw.com/login"] {
    display: none !important;
}

/* Hide Live Collaboration explicitly */
button[title="Live collaboration..."],
.collab-button,
[data-testid="collab-button"],
.dropdown-menu-item-base[aria-label="Live collaboration..."] {
    display: none !important;
}

/* Hide "Welcome to Excalidraw" screen actions if they contain sign up */
.welcome-screen-menu-item {
    display: none !important;
}

/* Hide default font family icon buttons - we'll replace with dropdown */
/* Hide default font family icon buttons - we'll replace with dropdown */
/* .Island fieldset:has(button[aria-label*="font"]) {
    display: none !important;
} */

.buttonList button[aria-label*="Virgil"],
.buttonList button[aria-label*="Helvetica"],
.buttonList button[aria-label*="Cascadia"],
button[data-testid*="font-family"],
button[aria-label="Hand-drawn"],
button[aria-label="Normal"],
button[aria-label="Code"],
button[aria-label="Excalifont"] {
    opacity: 0 !important;
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    overflow: hidden !important;
    pointer-events: auto !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Customize Font */
body,
button,
input,
textarea:not(.excalidraw-textEditorContainer > textarea),
.excalidraw {
    font-family: 'Reddit Sans', 'Google Sans Flex', sans-serif !important;
}

/* Ensure the text editor uses the selected font */
/* Default override to ensure we don't get Reddit Sans */
.excalidraw-textEditorContainer>textarea {
    font-family: var(--ui-font) !important;
}

/* Specific Font Overrides via Body Class */
body.excalidraw-font-1 .excalidraw-textEditorContainer>textarea {
    font-family: 'Virgil', 'Segoe UI Emoji', sans-serif !important;
}

body.excalidraw-font-2 .excalidraw-textEditorContainer>textarea {
    font-family: 'Helvetica', 'Segoe UI Emoji', sans-serif !important;
}

body.excalidraw-font-3 .excalidraw-textEditorContainer>textarea {
    font-family: 'Cascadia', 'Segoe UI Emoji', monospace !important;
}

body.excalidraw-font-5 .excalidraw-textEditorContainer>textarea {
    /* Fallback for the dynamic slot hijacker - will be redefined by JS */
    /* Fallback for the dynamic slot hijacker - will be redefined by JS */
    font-family: 'Excalifont', sans-serif !important;
}

/* Secondary IDs (6-16) also map to ID 5 in JS, so we point them here as fallback */
body.excalidraw-font-6 .excalidraw-textEditorContainer>textarea,
body.excalidraw-font-7 .excalidraw-textEditorContainer>textarea,
body.excalidraw-font-8 .excalidraw-textEditorContainer>textarea,
body.excalidraw-font-9 .excalidraw-textEditorContainer>textarea,
body.excalidraw-font-10 .excalidraw-textEditorContainer>textarea,
body.excalidraw-font-11 .excalidraw-textEditorContainer>textarea,
body.excalidraw-font-12 .excalidraw-textEditorContainer>textarea,
body.excalidraw-font-13 .excalidraw-textEditorContainer>textarea,
body.excalidraw-font-14 .excalidraw-textEditorContainer>textarea,
body.excalidraw-font-15 .excalidraw-textEditorContainer>textarea,
body.excalidraw-font-16 .excalidraw-textEditorContainer>textarea {
    font-family: 'Excalifont', sans-serif !important;
}

/* Ensure fonts render on canvas - critical for persistence */
body.excalidraw-font-5 .excalidraw text,
body.excalidraw-font-5 canvas {
    font-family: 'Excalifont', sans-serif !important;
}

/* Custom Font Selector Dropdown Styles */
.custom-font-selector {
    padding: 8px 12px;
    border-bottom: 1px solid var(--color-gray-30);
}

/* Hamburger menu variant */
.custom-font-selector-menu {
    padding: 0;
    margin: 8px 0 12px 0;
}

.custom-font-label {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-gray-60);
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.custom-font-dropdown,
.custom-font-dropdown-menu {
    position: relative;
}

.custom-font-button,
.custom-font-button-menu {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    background: #f8f9fa;
    border: 1px solid #e1e4e8;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.875rem;
    color: #1a1a1a;
    transition: all 0.2s ease;
}

.custom-font-button:hover,
.custom-font-button-menu:hover {
    background: #eff1f3;
    border-color: #d0d4d8;
}

.custom-font-button:active,
.custom-font-button-menu:active {
    transform: scale(0.98);
}

.custom-font-button svg,
.custom-font-button-menu svg {
    opacity: 0.6;
    transition: transform 0.2s ease;
}

.custom-font-dropdown:has(.custom-font-menu[style*="display: block"]) .custom-font-button svg,
.custom-font-dropdown-menu:has(.custom-font-menu[style*="display: block"]) .custom-font-button-menu svg {
    transform: rotate(180deg);
}

.custom-font-menu {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #e1e4e8;
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 10000;
    overflow: hidden;
}

.custom-font-option {
    width: 100%;
    padding: 10px 12px;
    border: none;
    background: white;
    text-align: left;
    cursor: pointer;
    font-size: 0.875rem;
    color: #1a1a1a;
    transition: background 0.15s ease;
}

.custom-font-option:hover {
    background: #f0f6ff;
}

/* --- Top Left Font Selector --- */
.custom-font-btn-top {
    background-color: var(--color-gray-10);
    border: 1px solid var(--color-gray-30);
    border-radius: 8px;
    /* Match Excalidraw rounded vibe */
    padding: 8px 12px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-left: 12px;
    height: 40px;
    /* Match standard button height */
    font-family: 'Virgil', sans-serif;
    font-size: 0.9rem;
    color: var(--color-gray-80);
    pointer-events: auto;
    transition: all 0.2s ease;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.custom-font-btn-top:hover {
    background-color: var(--color-gray-20);
    transform: translateY(-1px);
}

.custom-font-btn-top svg {
    width: 16px;
    height: 16px;
    margin-left: 8px;
    opacity: 0.6;
}

.custom-font-menu-top {
    position: absolute;
    top: 60px;
    left: 70px;
    /* Adjust based on button position */
    background: white;
    border: 1px solid #e1e4e8;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 10000;
    width: 180px;
    display: none;
    flex-direction: column;
    overflow: hidden;
}

.custom-font-menu-top.active {
    display: flex;
}


/* --- REPLACE ICONS WITH FONTAWESOME --- */

/* Base style for all tool icons to hide original SVG */
/* .excalidraw .ToolIcon__icon svg {
    display: none !important;
} */

/* Base style for FontAwesome replacement */
/* .excalidraw .ToolIcon__icon::after {
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    font-size: 1.2rem;
    color: var(--icon-fill-color);
    display: inline-block;
}

.excalidraw .ToolIcon_type_radio:checked + .ToolIcon__icon::after {
    color: var(--color-primary);
} */

/* Selection (V) */
/* [data-testid="toolbar-selection"] .ToolIcon__icon::after {
    content: "\f245"; 
} */

/* Rectangle (R) */
/* [data-testid="toolbar-rectangle"] .ToolIcon__icon::after {
    content: "\f0c8"; 
    font-weight: 400; 
} */

/* Diamond (D) */
/* [data-testid="toolbar-diamond"] .ToolIcon__icon::after {
    content: "\f0c8"; 
    font-weight: 400;
    transform: rotate(45deg) scale(0.8);
} */

/* Ellipse (O) */
/* [data-testid="toolbar-ellipse"] .ToolIcon__icon::after {
    content: "\f111"; 
    font-weight: 400;
} */

/* Arrow (A) */
/* [data-testid="toolbar-arrow"] .ToolIcon__icon::after {
    content: "\f178"; 
} */

/* Line (L) */
/* [data-testid="toolbar-line"] .ToolIcon__icon::after {
    content: "\f068"; 
} */

/* Draw (P) */
/* [data-testid="toolbar-freedraw"] .ToolIcon__icon::after {
    content: "\f303"; 
} */

/* Text (T) */
/* [data-testid="toolbar-text"] .ToolIcon__icon::after {
    content: "\f031"; 
} */

/* Image (I) */
/* [data-testid="toolbar-image"] .ToolIcon__icon::after {
    content: "\f03e"; 
    font-weight: 400;
} */

/* Eraser (E) */
/* [data-testid="toolbar-eraser"] .ToolIcon__icon::after {
    content: "\f12d"; 
} */

/* Hand (H) */
/* [data-testid="toolbar-hand"] .ToolIcon__icon::after {
    content: "\f256"; 
} */

/* Laser (K) */
/* [data-testid="toolbar-laser"] .ToolIcon__icon::after {
    content: "\e2ca"; 
} */

/* Lock */
/* [data-testid="toolbar-lock"] .ToolIcon__icon svg {
    display: none !important;
}
[data-testid="toolbar-lock"] .ToolIcon__icon::after {
    content: "\f023"; 
    font-family: "Font Awesome 6 Free"; 
    font-weight: 900;
} */

/* Frame (F) */
/* [data-testid="toolbar-frame"] .ToolIcon__icon::after {
    content: "\f5cb"; 
} */

/* Embeddable */
/* [data-testid="toolbar-embeddable"] .ToolIcon__icon::after {
    content: "\f0c1"; 
} */

/* Magic Frame */
/* [data-testid="toolbar-magicframe"] .ToolIcon__icon::after {
    content: "\f0d0"; 
} */

/* Extra Tools Dropdown Trigger */
/* .App-toolbar__extra-tools-trigger svg {
    display: none !important;
}
.App-toolbar__extra-tools-trigger::after {
    content: "\f0c9"; 
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    font-size: 1rem;
    color: var(--icon-fill-color);
} */

/* Zoom Icons */
/* .zoom-in-button svg { display: none !important; }
.zoom-in-button .ToolIcon__icon::after {
    content: "\f00e"; 
}

.zoom-out-button svg { display: none !important; }
.zoom-out-button .ToolIcon__icon::after {
    content: "\f010"; 
} */

.reset-zoom-button {
    font-weight: bold;
}

/* Undo/Redo */
/* [data-testid="button-undo"] .ToolIcon__icon::after {
    content: "\f0e2"; 
}
[data-testid="button-redo"] .ToolIcon__icon::after {
    content: "\f01e"; 
} */

/* Background Color Picker Icon */
/* [data-testid="canvas-background-picker"] .ToolIcon__icon::after {
    content: "\f576"; 
} */